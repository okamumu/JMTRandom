/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java Library project to get you started.
 * For more details take a look at the Java Libraries chapter in the Gradle
 * user guide available at https://docs.gradle.org/4.5/userguide/java_library_plugin.html
 */

plugins {
    id 'java-library'
    id 'jacoco'
    id 'maven'
}

dependencies {
    testImplementation 'junit:junit:4.12'
}

repositories {
    jcenter()
}

javadoc {
    options.locale = 'en_US'
}

def defaultEncoding = 'UTF-8'

compileJava {
  options.encoding = defaultEncoding
}

version = "0.1.0"

// build docs director
task copyDocs(type: Copy, dependsOn:[javadoc]) {
    from 'build/docs/javadoc'
    into 'docs/javadoc'
}

// maven local

def repo = new File(rootDir, "docs/repository")

uploadArchives {
  repositories {
    mavenDeployer {
      repository url: "file://${repo.absolutePath}"
      pom.version = "${version}"
      pom.groupId = 'com.github.okamumu'
      pom.artifactId = 'jmtrandom'
    }
  }
}
uploadArchives.dependsOn copyDocs

task docs (dependsOn: uploadArchives)
